% vim: spelllang=en_gb

\documentclass[12pt,a4paper,abstract=true,draft]{scrartcl}
\usepackage{ifdraft}

% --------------------
% Set Language Options
% --------------------

\usepackage[nswissgerman,french,main=english]{babel}
\usepackage[autostyle,english=american,german=swiss]{csquotes}
\MakeOuterQuote{"}

\usepackage[shortcuts]{extdash}

% --------------
% Font & Symbols
% --------------

\usepackage{amssymb,mathtools}
\usepackage[warnings-off={mathtools-colon,mathtools-overbracket}]{unicode-math}
\usepackage[oldstyle,proportional]{libertinus-otf}

% ---------------
% Set Page Layout
% ---------------

% Get length of 65 characters
%\setlxvchars

\usepackage[driver=auto]{geometry}
% A5: 148mm Ã— 210mm
% A4: 210mm Ã— 297mm
\geometry{
  width=140mm,
  height=217mm,
  marginparsep=3mm,
  marginparwidth=30mm,
}
\ifdraft{\geometry{
  inner=10mm,
  marginparwidth=50mm
}}{}


% ---------------------
% Load Various Packages
% ---------------------

% Various Math Environments
\usepackage{amsthm,thmtools}

% Bibliography
\usepackage[style=numeric-comp,url=false,isbn=false]{biblatex}
\addbibresource{bibliography.bib}

% For general figures
\usepackage[final]{graphicx}
\graphicspath{{/img}}
\usepackage{subcaption}
\usepackage{tikz}
\usetikzlibrary{babel,cd,shapes,3d}
\tikzcdset{arrow style=math font}
\tikzset{cross/.style={
    cross out, draw, solid, thin, 
    minimum size=2*(#1-\pgflinewidth), 
    inner sep=0pt, outer sep=0pt
  },
  cross/.default={3}
}

% For lists
\usepackage[shortlabels]{enumitem}

% For better Tables
%\usepackage{tabularray}

% For more fine grained typesetting in final mode.
% Else set the tolerance for overfull warnings higher.
\ifdraft{\hfuzz=1.5pt}{\usepackage{microtype}}

% Links and stuff
\usepackage[final]{hyperref}
\usepackage[noabbrev,capitalize]{cleveref}

% Suppress Latex build info in PDF (for uploads to arxiv)
\hypersetup{
  pdfcreator = {},
  pdfproducer = {}
}
\pdfvariable suppressoptionalinfo \numexpr 1+2+4+8+16+32+64+128+256+512 \relax


% For Todonotes
\usepackage[obeyDraft]{luatodonotes}

% --------------------------------------------
% Define Theorem Environments & Math Operators
% --------------------------------------------

\declaretheorem[numberwithin=section]{theorem}
\declaretheorem[sibling=theorem]{lemma, proposition, corollary}
\declaretheorem[sibling=theorem,style=definition]{definition, example}
\declaretheorem[sibling=theorem,style=remark]{remark}
\declaretheorem[name=Theorem,
refname={Theorem,Theorems},
Refname={Theorem,Theorems}]{maintheorem}
\renewcommand{\themaintheorem}{\Alph{maintheorem}}


\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\interior}{int}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Diff}{Diff}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\HF}{HF}
\DeclareMathOperator{\HM}{HM}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\Flux}{Flux}
\DeclareMathOperator{\Crit}{Crit}

% ----------------------------
% Various Marcos and Shortcuts
% ----------------------------

\usepackage{physics2} % various shortcuts
\usephysicsmodule{ab,ab.legacy}
\newcommand\mqty[1]{\begin{pmatrix}#1\end{pmatrix}}

\begin{document}
\title{Branch Cut Tangles}
\author{Joel Schmitz}
\maketitle

\section{Thin Branch Cut Tangles}


\begin{definition}
  \label{def:bcs}
  A \textbf{thin branch cut segment} $ğ“‹ = ([a,b],v,Î»)$ is an oriented line segment $[a,b] âŠ‚ â„^n$ labelled with primitive integral vectors $v âˆˆ â„¤^n$ and $Î» âˆˆ (â„¤^n)^*$ such that $âŸ¨Î»,vâŸ© = 0$ and that $b-a$ lies in the ray $\{Î±v \mid Î±>0\}$.

  We call $ğ“‹^{-1} = ([b,a],-v,Î»)$ the \textbf{reverse} of $ğ“‹$.
\end{definition}

\begin{definition}
  \label{def:bcs_resolution}
  To a thin branch cut segment $ğ“‹ = ([a,b],v,Î»)$ we associate its \textbf{resolution map} $\overline{ğ“‹} \colon â„^n â†’ â„^n$ given by the piecewise affine linear map
  \[\overline{ğ“‹} x = 
    \begin{cases}
      x - v âŸ¨Î»,x-aâŸ© & \text{if } âŸ¨Î»,x-aâŸ© â‰¥ 0 \\
      x             & \text{otherwise}
    \end{cases}
  \]
  or equivalently coordinate\-/wise by the tropical rational functions
  \[(\overline{ğ“‹}x)_i = \ab(0âŠ•a^{Î»}âŠ™x^{-Î»})^{-v_i} âŠ™ x_i \; .\]

  If $ğ“Š = ([c,d],u,Î¼)$ is another thin branch cut segment, we write
  \[\overline{ğ“‹} ğ“Š = 
    \begin{cases}
      \ab([\overline{ğ“‹}c, \overline{ğ“‹}d],
      u - v âŸ¨Î»,uâŸ©,
      Î¼ + Î» âŸ¨Î¼,vâŸ©)
      & \text{if } [c,d] âŠ‚ \{ x \mid âŸ¨Î»,x-a âŸ© â‰¥ 0\} \\
      ğ“Š
      & \text{if } [c,d] âŠ‚ \{ x \mid âŸ¨Î»,x-a âŸ© â‰¤ 0\} \\
      \text{undefined} & \text{otherwise}
    \end{cases} \;.\]
\end{definition}

\begin{remark}
  The map $Î¼ â†¦ Î¼ + Î» âŸ¨Î¼,v âŸ©$ is the dual-inverse of the linear map $x â†¦ x - v âŸ¨Î»,xâŸ©$.
Note that $\overline{ğ“‹^{-1}}=\overline{ğ“‹}^{-1}$.

If $ğ“Š = ([c,d],u,Î¼), ğ“‹ =([a,b],v,Î»)$ satisfy $[a,b] = [c,d]$ as sets, we say they \textbf{coincide}. In this case $\overline{ğ“Š}$ and $\overline{ğ“‹}$ commute.\todo{When do $ğ“Š$ and $ğ“‹$ commute?}
\end{remark}

\begin{definition}
  \label{def:stack}
  A \textbf{thin branch cut stack} $ğ’®$ at $x âˆˆ â„^n$ of height $m$ is a $m$-tuple of pairs of thin branch cut segments $((ğ“‹_{01},ğ“‹_{02}),â€¦,(ğ“‹_{m1},ğ“‹_{m2}))$, satisfying the following:
  Write $ğ“‹_{ij} = ([a_{ij},b_{ij}],v_{ij},Î»_{ij})$.
  \begin{enumerate}
    \item $b_{i1} = a_{i2} = x$.
    \item (Top is straight) $v_{01} = v_{02}$ and $Î»_{01} = Î»_{02}$.
    \item (NCAS\footnote{Node collision avoidance system}) If $âŸ¨Î»_{ij},v_{kl} âŸ© = 0$ then $v_{ij}= Â± v_{kl}$.
    \item (Reduction) If $m>0$ then $((\overline{ğ“‹_{01}} ğ“‹_{11}, \overline{ğ“‹_{01}} ğ“‹_{12}), â€¦, (\overline{ğ“‹_{01}} ğ“‹_{m1}, \overline{ğ“‹_{01}} ğ“‹_{m2}))$ is a thin branch cut stack of height $m-1$.\label{itm:stack_reduce}
  \end{enumerate}

  Reducing the height of a stack as in \cref{itm:stack_reduce}, we apply the resolution map $u_0 = \overline{ğ“‹_{01}}$.
  Repeatedly reducing the height until the stack is empty, we successively apply resolution maps
  \[
    u_0 = \overline{ğ“‹_{01}}\;, \quad
    u_1 = \overline{\overline{ğ“‹_{01}} ğ“‹_{11}}\;, \quad
    â€¦\;, \quad
    u_m = \overline{\overline{\overline{\overline{ ğ“‹_{01}} ğ“‹_{11}} ğ“‹_{21}} â€¦ ğ“‹_{m1}} \;.
  \]
  The composition $u_m âˆ˜ â€¦ âˆ˜ u_1 âˆ˜ u_0$ is called the \textbf{resolution map} of $ğ’®$.
\end{definition}

\begin{definition}
  \label{def:bct}
  A \textbf{thin branch cut tangle} $ğ’¯ âŠ‚ Î”$ is an embedded directed graph $(C,B)$ where the edges $B$ are thin branch cuts segments, and every vertex $x âˆˆ C$ belongs to one of the following classes:
  \begin{description}
    \item[Start] $\deg(x) = (0,1)$, $x âˆˆ Î”^{n-2} âˆ– Î”^{n-3}$ with the $n-1$-faces adjacent to $x$ having primitive normal vectors $Î»_1,Î»_2$ and the outgoing segment $ğ“‹ = ([x,b],v,Î»)$ satisfies $Î» = Î»_1-Î»_2$ and $âŸ¨Î»_1,v âŸ© = âŸ¨ Î»_2,v âŸ© = 1$.
    \item[End] $\deg(x) = (m,0)$ and all adjacent edges coincide.
    \item[U-Turn] $\deg(x) = (m,m)$, all adjacent edges coincide and arrange into pairs $ğ“‹_1, ğ“‹_2$ satisfying $ğ“‹_1^{-1} = ğ“‹_2$.
    \item[Stack] $\deg(x) = (m,m)$, and the adjacent edges arrange into a thin branch cut stack of height $m$.
  \end{description}
\end{definition}

\section{Realizing a thin branch cut tangle}

\subsection{Neighbourhood of a focus-focus fibre}

Let $Ï€ \colon (X,Ï‰) â†’ O$ be an almost toric fibration.

Then by \cite[Proposition~5.4]{Zun96} the set $N$ of (codimension 2 non-degenerate topologically stable) focus-focus singular values in $B$ is a $n-2$ dimensional submanifold called \textbf{nodes} of $Ï€$.

For some open set $U âŠ‚ O$, given a covector field $Î¾ âˆˆ T^*U$, we get a Hamiltonian $â„$-action $Ï†_Î¾^t$ on $Ï€^{-1}(U)$ by the Hamiltonian vector field $Î¹_{X_Î¾} Ï‰ = d(f âˆ˜ Ï€) = Î¾ âˆ˜ DÏ€$, as locally we may write $Î¾=df$.
We define the \textbf{affine monodromy sheaf} $ğ’«$ by setting
\[ğ’«(U) = \{Î¾ âˆˆ T^*U \mid Ï†_Î¾^1 = \id \} \; .\]

\begin{remark}
  Equivalently, we may also define $ğ’«$ as the sheaf of system-preserving Hamiltonian $SÂ¹$-actions, as is quickly verified.
  Thus the $ğ’«$ is indeed the same thing as the \emph{affine monodromy sheaf} in \cite{Zun03}.
  The letter $ğ’«$ comes from the fact that $ğ’«(U)$ marks the periodic Hamiltonian $â„$-actions in $T^*U$, and in analogy of the \emph{period lattice}.
\end{remark}

If $U âŠ‚ O âˆ– N$ is a disk (thus only containing regular and elliptic values), then $ğ’«(U) â‰… â„¤^n$ and a basis $(g_1,â€¦,g_n)$ gives action-coordinates $(f_1,â€¦,f_n)$ on $U$ by choosing $f_i$ such that $g_i = df_i$.
In the case where $U$ only contains regular values this is the classical Arnold-Liouville Theorem, the case with elliptic values is treated in e.g.\ \cite{DuMo91}.
See also the discussion around \cite[Theorem 3.9]{Zun96}.
This also equips $O âˆ– N$ with an integral affine structure, by requiring charts $(U_i,Ï†_i)_{i âˆˆ I}$ to satisfy $Ï†_i^* ğ’«(U_i âˆ© U_j) = â„¤^n âŠ‚ T^*â„^n$.\footnote{The atlas defined by such charts may not be compatible with the original smooth structure of $O$ near $âˆ‚O$â€¦}

While we cannot extend the integral affine structure or action coordinates to $N$, we can at least do so partially:
Let $U âŠ‚ O$ be a disk such that $N âˆ© U$ is non-empty and connected.
By \cite[Proposition 5.2 a)]{Zun96} $ğ’«(U) â‰… â„¤^{n-1}$, giving rise to $n-1$ action coordinates $(f_1,â€¦,f_{n-1})$, unique up to $n-1$ integral affine transformations, and the inclusion $ğ’«(U) â†’ ğ’«(U âˆ– N)$.
By \cite[Proposition 5.2 b) and Proposition 5.4 a)]{Zun96}, there is a unique $SÂ¹$-action $Î» âˆˆ ğ’«(U)$ fixing the set of focus-focus singularities in $Ï€^{-1}(U)$ pointwise and which is free elsewhere.
Take $Î¶ âˆˆ â‹€^{n-2}ğ’«(U) âŠ‚ Î©^{n-2}(U)$ such that $Î» âˆ§ Î¶ â‰  0 âˆˆ â‹€^{n-1}ğ’«(U)$ is primitive (i.e.\ it is represented by a basis of $ğ’«(U)$).
Then the subspace $\{v \mid Î¹_v Î» âˆ§ Î¶ = 0\} âŠ‚ T_x O$ is 1D. Is there a primitive generator? What is the affine structure on $TO$?



\begin{lemma}[{\cite[Theorem~2.26]{evans2021atfs}}]
  If $f \colon X â†’ B$ and $g \colon Y â†’ B$ are regular Lagrangian fibrations over the same base, both admitting global Lagrangian sections $Ïƒ$ and $Ï„$.
  Then there is a unique fibred symplectomorphism $Î¦ \colon X â†’ Y$ such that $Î¦ âˆ˜ Ïƒ = Ï„$.
\end{lemma}

\todo{What is a focus-focus singularity?}

\begin{definition}[{\cite[Definition~8.1]{evans2021atfs}}]
  An almost toric fibration is a Lagrangian fibration $f \colon X â†’ B$ on a $2n$-dimensional symplectic manifold such that $B$ is also a smooth manifold (with corners), and for $d âˆˆ \{1,â€¦,n-3,n-1\}$ the $d$-stratum $S_d(B)$ consist of toric critical points, and the $S_{n-2}$ consist of toric and focus-focus critical points.
\end{definition}

\begin{lemma}[{\cite[Remark~6.9]{evans2021atfs}}]
  Let $N âŠ‚ B$ be the $n-2$ dimensional submanifold consisting of focus-focus singularites. Then the monodromy generated by a small loop around a point $x âˆˆ N$ in $B^\text{reg}$ is given by a shear map of the form
  \[
    S_{v,Î»} = \id + vÎ» \; .
  \]
\end{lemma}

Let $B^\text{reg}$ be the set of regular values of an almost toric fibration $f$, $\tilde{B^\text{reg}}$ its universal cover and let $I \colon \tilde{B^\text{reg}} â†’ â„^n$ be the flux map. Let $D âŠ‚ \tilde{B^\text{reg}}$ be a fundamental domain for the action of $Ï€_1(B^\text{reg})$.

\section{Resolution Groups}

Ask Virginie Charette, William Goldman

\end{document}
